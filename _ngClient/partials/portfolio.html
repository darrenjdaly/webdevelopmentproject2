<div class="row">
  <div class="col-md-12">
    <td><button onclick="window.location.reload()" class="btn btn-success">Reset</button></td>
    <td><button type="button" class="btn btn-primary" ng-click="saveStocks()">Save</button></td>
    <br />
    <br />

    <div class="alert alert-info" ng-if="message" role="alert">{{message}}</div>

    <!--
	  All the data relating to a single stock is now accessed via stockData, process the held array for individual lines
	  -->
    <div class="row">
		<tr>
     <th>Gross Profit/Loss:</th> 
	 <td><span>{{calculateTotalGain(allStocks)}}</span></td><br>
	 <td><span>{{CalculatetotalSellCost(allStocks)}}</span></td>
	  </tr>
      <table class="table table-striped table-condensed">
        <tr>
          <th style="width:8%">Symbol</th>
          <th style="width:10%">Description</th>
          <th style="width:8%">Date In</th>
          <th>Index</th>
          <th>Qty</th>
        <th>Total Quantity</th>
          <th>Cost</th>
          <th>Purchase Price</th>
          <th>Current Price</th>
          <th>Current Value</th>
          <th>Detailed gain/loss</th>
          <th>Cumulative gain/loss</th>
          <th>% gain/loss</th>
          <th>Sell costs</th>
        </tr>

        <!-- inner ng-repeat, each line withing a symbol/stock -->
        <tbody ng-repeat="(stockSymbol, stockData) in allStocks" style="border-bottom:50px solid white;">
          <tr ng-repeat="oneRecord in stockData.held">
            <!--Symbol-->
            <td style="width:8%">{{stockSymbol}}</td>
            <!--Desc-->
            <td style="width:10%">{{oneRecord.Name}}</td>
            <!--Date In-->
            <td style="width:8%">{{oneRecord.ts}}</td>
            <!--Index-->
            <td>{{oneRecord.ex}}</td>
            <!--Quantity-->
            <td style="width:3%">{{oneRecord.number}}</td>
			<!--TotalQty-->
			<td></td>
            <!--Original Cost-->
            <td>{{oneRecord.cost}}</td>
            <!--Purchase Price-->
            <td>{{oneRecord.pps}}</td>
            <!--Input Current Price-->
            <td>
              <input ng-if="$index == 0" ng-model="stockData.cpps" type="text" value="{{stockData.cpps}}" />
              <span ng-if="$index != 0">{{stockData.cpps}}</span>
            </td>
            <!--Current Value-->
            <!--<td id ="adjust">{{oneRecord.currentValue}}</td>-->
            <td>{{currentValue(oneRecord,stockData)}}
            </td>
            <!--Gain/Loss-->
            <td>{{calculateGain(oneRecord,stockData)}}</td>
            <!--Cumulative Gain/Loss-->
            <td>{{aStockSymbol.qtyTotal}}</td>
            <!--Percentage Gain/Loss-->
            <!--<td>{{(oneRecord.number * oneRecord.cpps-oneRecord.cost-oneRecord.cost/100 - 1.25)/oneRecord.cost*100 | number:2}}%</td> -->
            <td ng-class="isProfitable(oneRecord,stockData)? 'text-success':'text-danger'"><strong>{{calculateGainPrc(oneRecord,stockData)}}%<strong></td>
            <!--Selling Cost-->
            <td>{{calculateSellCost(oneRecord,stockData)}}</td>
          </tr>

          <tr >
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <!--Cumulative Gain/Loss-->
            <th></th>
            <th>{{stockData.totalQuantity}}</th>
            <th></th>
            <th></th>
            <!--Value Total-->
            <th></th>
            <th></th>
            <th></th>
            <!--Cumulative Gain/Loss-->
            <th ng-class="calculateGainAll(stockData) > 0? 'text-success':'text-danger' ">{{calculateGainAll(stockData)}}</th>
            <th></th>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
